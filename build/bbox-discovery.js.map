{"version":3,"file":"bbox-discovery.js","sourceRoot":"","sources":["../src/bbox-discovery.ts"],"names":[],"mappings":";;;AAAA,yBAAyB;AACzB,iCAAiC;AACjC,iCAAiC;AACjC,iCAmBgB;AAChB,qCAA8C;AAI9C,MAAa,YAAY;IAAzB;QACE,YAAO,GAAa,EAAE,CAAC;QACvB,kBAAa,GAAmD,EAAE,CAAC;IA4ErE,CAAC;IA1EC,mBAAmB;QACjB,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,aAAa,EAAE;YACpC,MAAM,EAAC,IAAI,EAAE,SAAS,EAAC,GAAG,GAAG,CAAC;YAE9B,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;gBACjC,mEAAmE;gBACnE,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC;aACrC;YAED,IAAI,IAAI,CAAC,OAAO,EAAE;gBAChB,MAAM,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC9C,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;oBAC1B,MAAM,EAAE,SAAS;oBACjB,MAAM,EAAE,OAAO;oBACf,IAAI;iBACL,CAAC,CAAC;gBACH,SAAS;aACV;YAED,IAAI,IAAI,CAAC,IAAI,EAAE;gBACb,MAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;gBAClD,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;oBAC1B,MAAM,EAAE,SAAS;oBACjB,MAAM,EAAE,IAAI;oBACZ,IAAI;iBACL,CAAC,CAAC;gBACH,SAAS;aACV;YAED,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjB,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;gBAC1D,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC;oBAC1B,MAAM,EAAE,SAAS;oBACjB,MAAM,EAAE,IAAI;oBACZ,IAAI;iBACL,CAAC,CAAC;gBACH,SAAS;aACV;SACF;IACH,CAAC;IAED,UAAU,CAAC,IAAY;QACrB,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YACjC,IAAI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACzB,OAAO,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;aAC9B;SACF;QACD,MAAM,IAAI,kBAAS,CAAC,kBAAS,CAAC,QAAQ,EAAE,WAAW,IAAI,YAAY,CAAC,CAAA;IACtE,CAAC;IAED,OAAO,CAAC,MAAc,EAAE,IAAY;QAClC,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC/C,IAAI,GAAG,EAAE;YACP,OAAO,GAAG,CAAC;SACZ;QACD,MAAM,IAAI,kBAAS,CAAC,kBAAS,CAAC,QAAQ,EAAE,QAAQ,IAAI,YAAY,CAAC,CAAA;IACnE,CAAC;IAED,WAAW,CAAC,MAAc,EAAE,IAAY;QACtC,MAAM,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACnD,IAAI,GAAG,EAAE;YACP,OAAO,GAAG,CAAC;SACZ;QACD,MAAM,IAAI,kBAAS,CAAC,kBAAS,CAAC,QAAQ,EAAE,YAAY,IAAI,YAAY,CAAC,CAAA;IACvE,CAAC;IAED,SAAS,CAAC,IAAY;QACpB,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YACjC,IAAI,MAAM,CAAC,IAAI,KAAK,IAAI,EAAE;gBACxB,OAAO,MAAM,CAAC;aACf;SACF;QACD,MAAM,IAAI,kBAAS,CAAC,kBAAS,CAAC,QAAQ,EAAE,UAAU,IAAI,YAAY,CAAC,CAAA;IACrE,CAAC;CACF;AA9ED,oCA8EC;AAED,MAAa,aAAa;IAA1B;QACU,aAAQ,GAAG,SAAS,CAAA;QAEpB,kBAAa,GAAG;YACtB,IAAI,CAAC,QAAQ;YACb,KAAK,IAAI,CAAC,QAAQ,EAAE;SACrB,CAAC;IA2TJ,CAAC;IAzTC,gBAAgB,CAAC,WAAmB;QAClC,IAAI,QAAQ,GAAG,SAAS,CAAC;QACzB,OAAO,IAAI,EAAE;YACX,IAAI,EAAE,CAAC,UAAU,CAAC,GAAG,WAAW,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE;gBACpD,QAAQ,GAAG,WAAW,CAAC;aACxB;YACD,MAAM,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACjD,IAAI,UAAU,KAAK,WAAW,EAAE;gBAC9B,MAAM;aACP;YACD,WAAW,GAAG,UAAU,CAAC;SAC1B;QAED,IAAI,CAAC,QAAQ,EAAE;YACb,MAAM,IAAI,KAAK,CAAC,uBAAuB,IAAI,CAAC,QAAQ,OAAO,CAAC,CAAC;SAC9D;QAED,OAAO,QAAQ,CAAC;IAClB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,QAAgB;QACpC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAC5C,MAAM,EAAE,CAAC,UAAU,CAAC;YACpB,GAAG,EAAE,QAAQ;YACb,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;YACf,qEAAqE;YACrE,cAAc,EAAE,IAAI,CAAC,sDAAsD;SAC5E,CAAC,CAAC;QACH,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE,CAAC;QAC/B,KAAK,MAAM,cAAc,IAAI,KAAK,EAAE;YAClC,IAAI;gBACF,MAAM,YAAY,GAAG,QAAQ,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;gBACtD,MAAM,UAAU,GAAe,OAAO,CAAC,cAAc,CAAC,CAAC;gBACvD,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,GAAG,YAAY,QAAQ,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;gBACjH,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC1B;YAAC,OAAO,CAAC,EAAE;gBACV,MAAM,IAAI,KAAK,CAAC,uCAAuC,cAAc,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;aAC5F;SACF;QAED,GAAG,CAAC,mBAAmB,EAAE,CAAC;QAE1B,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,KAAK,CAAC,uBAAuB,CAAC,eAAuB;QACnD,MAAM,QAAQ,GAAG,GAAG,SAAS,UAAU,CAAC;QAExC,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YAC5C,MAAM,EAAE,CAAC,UAAU,CAAC;YACpB,GAAG,EAAE,QAAQ;YACb,QAAQ,EAAE,IAAI;YACd,SAAS,EAAE,IAAI;YACf,qEAAqE;YACrE,cAAc,EAAE,IAAI,CAAC,sDAAsD;SAC5E,CAAC,CAAC;QACH,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE,CAAC;QAC/B,KAAK,MAAM,cAAc,IAAI,KAAK,EAAE;YAClC,IAAI;gBACF,MAAM,YAAY,GAAG,QAAQ,CAAC,OAAO,CAAC,cAAc,CAAC,CAAC;gBACtD,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAa,cAAc,CAAC,CAAC;gBAC/D,MAAM,QAAQ,GAAG,GAAG,eAAe,2BAA2B,UAAU,CAAC,IAAI,EAAE,CAAC;gBAChF,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,YAAY,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;gBAC9F,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aAC1B;YAAC,OAAO,CAAC,EAAE;gBACV,MAAM,IAAI,KAAK,CAAC,uCAAuC,cAAc,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;aAC5F;SACF;QAED,GAAG,CAAC,mBAAmB,EAAE,CAAC;QAE1B,OAAO,GAAG,CAAC,OAAO,CAAC;IACrB,CAAC;IAED,eAAe,CAAC,MAAc;QAC5B,EAAE,CAAC,aAAa,CAAC,GAAG,MAAM,CAAC,QAAQ,aAAa,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IAC3F,CAAC;IAEO,YAAY,CAAC,QAAgB,EAAE,YAAoB,EAAE,UAAsB,EAAE,QAAgB,EAAE,OAAe,EAAE,GAAiB;QACvI,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAErB,MAAM,aAAa,GAAG,GAAG,QAAQ,aAAa,CAAC;QAC/C,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEjC,MAAM,cAAc,GAAG,GAAG,YAAY,iBAAiB,CAAC;QACxD,MAAM,UAAU,GAAG,IAAI,CAAC,kBAAkB,CAAa,cAAc,CAAC,CAAC;QAEvE,MAAM,SAAS,GAAG,GAAG,QAAQ,QAAQ,CAAC;QACtC,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QAEtB,MAAM,eAAe,GAAG,YAAY,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAEpE,IAAI,CAAC,KAAK,CAAC,GAAG,SAAS,iBAAiB,CAAC,CAAC;QAC1C,MAAM,oBAAoB,GAAG,GAAG,eAAe,6BAA6B,CAAC;QAE7E,MAAM,eAAe,GAAG,IAAI,CAAC,UAAU,CAAuB,aAAa,CAAC,CAAC;QAC7E,aAAa;QACb,MAAM,KAAK,GAAgB,MAAM,CAAC,MAAM,CAAoC;YAC1E,KAAK,EAAE,EAAE;YACT,SAAS,EAAE,EAAE;SACd,EAAE,eAAe,CAAC,CAAC;QAEpB,MAAM,MAAM,GAAW;YACrB,IAAI,EAAE,QAAQ;YACd,IAAI,EAAE,QAAQ,KAAK,YAAY;YAC/B,eAAe,EAAE,OAAO;YACxB,IAAI,EAAE,UAAU,CAAC,IAAI;YACrB,QAAQ,EAAE,EAAE;YACZ,KAAK;YACL,OAAO,EAAE,UAAU,CAAC,OAAO;YAC3B,YAAY;YACZ,IAAI,EAAE,eAAe;YACrB,iBAAiB,EAAE,EAAE;YACrB,IAAI,EAAE,UAAU;YAChB,QAAQ,EAAE,QAAQ;YAClB,UAAU;YACV,KAAK,EAAE,EAAE;YACT,SAAS,EAAE,EAAE;SACd,CAAA;QAED,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;QAC/D,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,SAAS,EAAE,MAAM,EAAE,GAAG,CAAC,CAAC;QAE3E,IAAI,UAAU,CAAC,MAAM,EAAE;YACrB,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAO,CAAC,MAAM,CAAC,CAAC;YAE9C,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,EAAE,oBAAoB,EAAE,eAAe,EAAE,QAAQ,CAAC,CAAC;YAEpH,MAAM,CAAC,MAAM,GAAG;gBACd,OAAO;aACR,CAAC;SACH;QAED,WAAW;QACX,IAAI,UAAU,CAAC,QAAQ,EAAE;YACvB,KAAK,MAAM,WAAW,IAAI,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;gBAC1D,MAAM,WAAW,GAAG,UAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;gBACrD,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE;oBACrB,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC;iBAChC;gBACD,IAAI,CAAC,WAAW,CAAC,GAAG,EAAE;oBACpB,WAAW,CAAC,GAAG,GAAG,EAAE,CAAC;iBACtB;gBACD,IAAI,WAAW,CAAC,KAAK,IAAI,CAAC,MAAM,CAAC,iBAAiB,CAAC,QAAQ,CAAC,cAAO,CAAC,KAAK,CAAC,EAAE;oBAC1E,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAO,CAAC,KAAK,CAAC,CAAC;iBAC9C;gBAED,MAAM,OAAO,GAAY;oBACvB,IAAI,EAAE,SAAS;oBACf,MAAM;oBACN,IAAI,EAAE,WAAW,CAAC,IAAI;oBACtB,IAAI,EAAE,WAAW;oBACjB,KAAK,EAAE;wBACL,aAAa,EAAE,2BAAoB,CAAC,OAAO;qBAC5C;oBACD,YAAY,EAAE,EAAE;iBACjB,CAAC;gBAEF,uBAAuB;gBACvB,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,YAAY,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;gBAElE,IAAI,WAAW,CAAC,MAAM,EAAE;oBACtB,6GAA6G;oBAC7G,MAAM,OAAO,GAAG,IAAI,CAAC,kBAAkB,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,oBAAoB,EAAE,eAAe,EAAE,QAAQ,CAAC,CAAC;oBACrH,OAAO,CAAC,MAAM,GAAG;wBACf,OAAO;qBACR,CAAA;iBACF;gBAED,MAAM,CAAC,QAAQ,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC;aACxC;SACF;QAED,IAAI,MAAM,CAAC,iBAAiB,CAAC,MAAM,KAAK,CAAC,EAAE;YACzC,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,cAAO,CAAC,KAAK,CAAC,CAAC;YAC7C,oEAAoE;YACpE,sEAAsE;SACvE;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE;YACnB,MAAM,CAAC,OAAO,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC;SAC9C;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;IAEO,WAAW,CAAC,SAAgC,EAAE,MAAc,EAAE,GAAiB;QACrF,IAAI,CAAC,SAAS,EAAE;YACd,OAAO,EAAE,CAAC;SACX;QAED,MAAM,KAAK,GAAU,EAAE,CAAC;QACxB,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;YACzC,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC;YACjC,MAAM,IAAI,GAAS;gBACjB,IAAI,EAAE,MAAM;gBACZ,IAAI;gBACJ,MAAM;gBACN,IAAI,EAAE,QAAQ;gBACd,YAAY,EAAE,EAAE;aACjB,CAAC;YAEF,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,YAAY,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;YAE5D,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;SACpB;QACD,OAAO,KAAK,CAAC;IACf,CAAC;IAEO,eAAe,CAAC,aAAwC,EAAE,MAAc,EAAE,GAAiB;QACjG,IAAI,CAAC,aAAa,EAAE;YAClB,OAAO,EAAE,CAAC;SACX;QAED,MAAM,SAAS,GAAc,EAAE,CAAC;QAChC,KAAK,MAAM,IAAI,IAAI,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;YAC7C,MAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;YACjC,MAAM,QAAQ,GAAa;gBACzB,IAAI,EAAE,UAAU;gBAChB,IAAI;gBACJ,MAAM;gBACN,IAAI;gBACJ,YAAY,EAAE,EAAE;aACjB,CAAC;YAEF,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,YAAY,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;YAE5D,SAAS,CAAC,IAAI,CAAC,GAAG,QAAQ,CAAC;SAC5B;QACD,OAAO,SAAS,CAAC;IACnB,CAAC;IAEO,oBAAoB,CAAC,gBAAkC,EAAE,SAAoB,EAAE,GAAiB;QACtG,IAAI,CAAC,gBAAgB,EAAE;YACrB,OAAO;SACR;QAED,KAAK,MAAM,kBAAkB,IAAI,gBAAgB,EAAE;YACjD,MAAM,cAAc,GAAG;gBACrB,0CAA0C;gBAC1C,4CAA4C;gBAC5C,GAAG,kBAAkB;aACtB,CAAA;YACD,GAAG,CAAC,aAAa,CAAC,IAAI,CAAC;gBACrB,SAAS;gBACT,IAAI,EAAE,cAAc;aACrB,CAAC,CAAC;SACJ;IACH,CAAC;IAEO,kBAAkB,CAAI,IAAY;QACxC,IAAI,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACvB,OAAO,IAAI,CAAC,UAAU,CAAI,IAAI,CAAC,CAAC;SACjC;QAED,OAAO,SAAS,CAAC;IACnB,CAAC;IAEO,UAAU,CAAI,IAAY;QAChC,IAAI,IAAI,GAAQ,OAAO,CAAC,IAAI,CAAC,CAAC;QAC9B,wBAAwB;QACxB,IAAI,IAAI,CAAC,OAAO,EAAE;YAChB,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC;SACrB;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAEO,KAAK,CAAC,IAAI;QAChB,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,EAAE,CAAC,SAAS,CAAC,IAAI,EAAE,EAAC,SAAS,EAAE,IAAI,EAAC,CAAC,CAAC;SACvC;IACH,CAAC;IAED;;OAEG;IACK,kBAAkB,CAAC,WAA0C,EAAE,2BAAmC,EAAE,qBAA6B,EAAE,WAAmB;QAC5J,IAAI,CAAC,WAAW,EAAE;YAChB,OAAO,EAAE,CAAC;SACX;QAED,MAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QAElC,MAAM,OAAO,GAAkB,EAAE,CAAC;QAClC,KAAK,MAAM,UAAU,IAAI,WAAW,EAAE;YACpC,IAAI,UAAU,GAAG,WAAW,CAAC,UAAU,CAAC,CAAC;YACzC,IAAI,mBAAmB,GAAG,GAAG,2BAA2B,IAAI,UAAU,EAAE,CAAC;YACzE,IAAI,aAAa,CAAC;YAClB,IAAI,OAAO,UAAU,KAAK,QAAQ,EAAE;gBAClC,aAAa,GAAG,UAAU,CAAC;aAC5B;iBAAM;gBACL,CAAC,EAAC,aAAa,EAAE,QAAQ,EAAE,mBAAmB,EAAC,GAAG,UAAU,CAAC,CAAC;gBAC9D,mBAAmB,GAAG,GAAG,qBAAqB,IAAI,mBAAmB,EAAE,CAAC;aACzE;YAED,OAAO,CAAC,UAAU,CAAC,GAAG;gBACpB,aAAa;gBACb,QAAQ,EAAE,KAAK,mBAAmB,EAAE,CAAC,gEAAgE;aACtG,CAAC;YAEF,IAAI,CAAC,KAAK,CAAC,GAAG,WAAW,IAAI,mBAAmB,EAAE,CAAC,CAAC;SACrD;QAED,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAExB,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,MAAM,CAAC,IAAI,EAAE,OAAO;QAC1B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE;YACxB,EAAE,CAAC,aAAa,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC;SACjC;IACH,CAAC;CACF;AAjUD,sCAiUC"}